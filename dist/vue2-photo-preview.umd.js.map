{"version":3,"file":"vue2-photo-preview.umd.js","sources":["../src/symbols.ts","../src/PhotoProvider/useItems.ts","../src/PhotoProvider/useVisible.ts","../src/PhotoProvider/useIndex.ts","../src/PhotoView/Spinner.vue","../src/utils/getSuitableImageSize.ts","../src/PhotoView/useLoadImage.ts","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/now.js","../node_modules/lodash-es/_trimmedEndIndex.js","../node_modules/lodash-es/_baseTrim.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/debounce.js","../node_modules/lodash-es/throttle.js","../src/PhotoView/useWindowResize.ts","../src/types.ts","../src/utils/getAnimateOrigin.ts","../src/utils/isTouchDevice.ts","../src/constant.ts","../src/utils/withContinuousTap.ts","../src/utils/getPositionOnMoveOrScale.ts","../src/utils/getEdgeInfo.ts","../src/utils/getMultipleTouchPosition.ts","../src/PhotoView/useMoveImage.ts","../src/PhotoView/index.vue","../src/PhotoSlider/useBodyEffect.ts","../src/PhotoSlider/useInnerWidth.ts","../src/PhotoSlider/Close.vue","../src/PhotoSlider/ArrowLeft.vue","../src/PhotoSlider/ArrowRight.vue","../src/PhotoSlider/RotateLeft.vue","../src/PhotoSlider/RotateRight.vue","../src/PhotoSlider/FlipHorizontal.vue","../src/PhotoSlider/FlipVertical.vue","../src/PhotoSlider/Download.vue","../src/PhotoSlider/useAnimationHandle.ts","../node_modules/vue2-teleport/dist/teleport.esm.js","../src/PhotoSlider/index.vue","../src/PhotoProvider/index.vue","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/uniqueId.js","../src/PhotoConsumer/index.vue","../src/index.ts"],"sourcesContent":["import { UpdateItemType, RemoveItemType, HandleShowType } from './types';\r\nimport { InjectionKey } from 'vue';\r\n\r\nexport const updateItemKey: InjectionKey<UpdateItemType> = Symbol();\r\n\r\nexport const removeItemKey: InjectionKey<RemoveItemType> = Symbol();\r\n\r\nexport const handleShowKey: InjectionKey<HandleShowType> = Symbol();\r\n","import { ref, Ref } from 'vue';\r\nimport { ItemType, UpdateItemType, RemoveItemType } from '../types';\r\n\r\ntype useItemsReturn = {\r\n  items: Ref<ItemType[]>;\r\n  updateItem: UpdateItemType;\r\n  removeItem: RemoveItemType;\r\n}\r\n\r\nexport default function useItems(index: Ref<number>): useItemsReturn {\r\n  const items = ref<ItemType[]>([]);\r\n\r\n  const getElementIndex = (children: HTMLCollection, child: HTMLElement | null | undefined) => {\r\n    return child ? Array.prototype.indexOf.call(children, child) : -1;\r\n  };\r\n\r\n  const sortItems = (items: ItemType[]) => {\r\n    const children = items[0].originRef?.parentNode?.children;\r\n    if (children && children.length) {\r\n      items.sort((cur, next) => getElementIndex(children, cur.originRef) - getElementIndex(children, next.originRef));\r\n    }\r\n  };\r\n\r\n  const updateItem = (item: ItemType) => {\r\n    const index = items.value.findIndex(({ key }) => item.key === key);\r\n    if (index > -1) {\r\n      items.value.splice(index, 1, item);\r\n    } else {\r\n      items.value.push(item);\r\n      sortItems(items.value);\r\n    }\r\n  };\r\n\r\n  const removeItem = (key: string) => {\r\n    const nextItems = items.value.filter((item) => item.key !== key);\r\n    const nextEndIndex = nextItems.length - 1;\r\n\r\n    items.value = nextItems;\r\n    index.value = Math.max(Math.min(index.value, nextEndIndex), 0);\r\n  };\r\n\r\n  return {\r\n    items,\r\n    updateItem,\r\n    removeItem,\r\n  };\r\n}\r\n","import { ref, Ref } from 'vue';\r\nimport { HandleShowType, ItemType } from '../types';\r\n\r\ntype useVisibleReturn = {\r\n  visible: Ref<boolean>;\r\n  handleHide: () => void;\r\n  handleShow: HandleShowType;\r\n}\r\n\r\nexport default function useVisible(\r\n  items: Ref<ItemType[]>,\r\n  index: Ref<number>,\r\n  onVisibleChange: () => void\r\n): useVisibleReturn {\r\n  const visible = ref(false);\r\n\r\n  const handleHide = () => {\r\n    visible.value = false;\r\n    onVisibleChange();\r\n  };\r\n\r\n  const handleShow = (key: string) => {\r\n    const itemIndex = items.value.findIndex(item => item.key === key);\r\n    if (itemIndex > -1) {\r\n      index.value = itemIndex;\r\n      visible.value = true;\r\n      onVisibleChange();\r\n    }\r\n  };\r\n\r\n  return {\r\n    visible,\r\n    handleHide,\r\n    handleShow,\r\n  };\r\n}\r\n","import { ref, Ref } from 'vue';\r\n\r\ntype useIndexReturn = {\r\n  index: Ref<number>;\r\n  updateIndex: (newIndex: number) => void;\r\n}\r\n\r\nexport default function useIndex(onIndexChange: () => void): useIndexReturn {\r\n  const index = ref(0);\r\n\r\n  const updateIndex = (newIndex: number) => {\r\n    index.value = newIndex;\r\n    onIndexChange();\r\n  };\r\n\r\n  return {\r\n    index,\r\n    updateIndex,\r\n  };\r\n}\r\n","<template>\r\n  <div class=\"PhotoView__Spinner\">\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 32 32\"\r\n      width=\"36\"\r\n      height=\"36\"\r\n      fill=\"white\"\r\n    >\r\n      <path\r\n        opacity=\".25\"\r\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\r\n      />\r\n      <path\r\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\r\n      />\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@keyframes PhotoView__rotate {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@keyframes PhotoView__delayShow {\r\n  0%,\r\n  50% {\r\n    opacity: 0;\r\n  }\r\n\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.PhotoView__Spinner {\r\n  animation: PhotoView__delayShow 0.4s linear both;\r\n\r\n  svg {\r\n    display: block;\r\n    animation: PhotoView__rotate 0.6s linear infinite;\r\n  }\r\n}\r\n\r\n</style>\r\n","export default function getSuitableImageSize(\r\n  naturalWidth: number,\r\n  naturalHeight: number,\r\n  rotate: number,\r\n): {\r\n  width: number;\r\n  height: number;\r\n} {\r\n  let { innerWidth, innerHeight } = window;\r\n  // 如果图片不是水平，则调换宽高\r\n  const isVertical = rotate % 180 !== 0;\r\n  if (isVertical) {\r\n    [innerWidth, innerHeight] = [innerHeight, innerWidth];\r\n  }\r\n\r\n  let width;\r\n  let height;\r\n\r\n  // 缩放到和窗口一样所需要的比例\r\n  const scaleWidth = innerWidth / naturalWidth;\r\n  const scaleHeight = innerHeight / naturalHeight;\r\n\r\n  if (naturalWidth < innerWidth && naturalHeight < innerHeight) {\r\n    // 如果图片原始宽度未超过容器尺寸，则使用原始尺寸\r\n    width = naturalWidth;\r\n    height = naturalHeight;\r\n  } else {\r\n    // 否则缩放图片使之恰好放入\r\n    if (scaleWidth < scaleHeight) {\r\n      width = innerWidth;\r\n      height = innerWidth * (naturalHeight / naturalWidth);\r\n    } else {\r\n      width = innerHeight * (naturalWidth / naturalHeight);\r\n      height = innerHeight;\r\n    }\r\n  }\r\n\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n","import { ref, Ref, watch } from 'vue';\r\nimport getSuitableImageSize from '../utils/getSuitableImageSize';\r\n\r\nexport default function useLoadImage(src: Ref<string>): {\r\n  width: Ref<number>;\r\n  height: Ref<number>;\r\n  loaded: Ref<boolean>;\r\n  naturalWidth: Ref<number>;\r\n  naturalHeight: Ref<number>;\r\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void;\r\n} {\r\n  const naturalWidth = ref(0);\r\n  const naturalHeight = ref(0);\r\n  const width = ref(0);\r\n  const height = ref(0);\r\n  const loaded = ref(false);\r\n\r\n  function setSuitableImageSize(actualWidth: number, actualHeight: number, rotate: number) {\r\n    const imageSize = getSuitableImageSize(actualWidth, actualHeight, rotate);\r\n    width.value = imageSize.width;\r\n    height.value = imageSize.height;\r\n  }\r\n\r\n  const loadImage = (src: string) => {\r\n    loaded.value = false;\r\n\r\n    const img = new Image();\r\n\r\n    img.onload = () => {\r\n      naturalWidth.value = img.naturalWidth;\r\n      naturalHeight.value = img.naturalHeight;\r\n      setSuitableImageSize(naturalWidth.value, naturalHeight.value, 0);\r\n      loaded.value = true;\r\n    };\r\n\r\n    img.src = src;\r\n  };\r\n\r\n  loadImage(src.value);\r\n\r\n  watch(src, () => {\r\n    loadImage(src.value);\r\n  });\r\n\r\n  return {\r\n    width,\r\n    height,\r\n    loaded,\r\n    naturalWidth,\r\n    naturalHeight,\r\n    setSuitableImageSize\r\n  };\r\n}\r\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import { Ref, onBeforeUnmount } from 'vue';\r\nimport throttle from 'lodash-es/throttle';\r\n\r\nexport default function useWindowResize(\r\n  naturalWidth: Ref<number>, naturalHeight: Ref<number>, rotate: Ref<number>,\r\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\r\n): void {\r\n\r\n  const handleResize = throttle(() => {\r\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\r\n  }, 8);\r\n\r\n  window.addEventListener('resize', handleResize);\r\n\r\n  onBeforeUnmount(() => {\r\n    window.removeEventListener('resize', handleResize);\r\n  });\r\n}\r\n","export type ItemType = {\r\n  // 唯一标识\r\n  key: string;\r\n  // 图片地址\r\n  src: string;\r\n  // 控住图片显示的节点\r\n  originRef?: HTMLElement | null;\r\n  // 图片介绍\r\n  intro?: string | null;\r\n  // 图片下载名称\r\n  downloadName?: string | null;\r\n}\r\n\r\nexport type OriginRectType = {\r\n  left: number;\r\n  top: number;\r\n  width: number;\r\n  height: number;\r\n} | null;\r\n\r\nexport type UpdateItemType = (item: ItemType) => void;\r\n\r\nexport type RemoveItemType = (key: string) => void;\r\n\r\nexport type HandleShowType = (key: string) => void;\r\n\r\n// 动画类型\r\nexport enum ShowAnimateEnum {\r\n  None,\r\n  In,\r\n  Out,\r\n}\r\n\r\n// 触摸状态\r\nexport enum TouchTypeEnum {\r\n  Normal,\r\n  X, // x 轴只能水平切换图片\r\n  Y, // y 轴只能撤销图片\r\n  Scale, // 缩放模式\r\n}\r\n\r\n// 边缘状态\r\nexport enum EdgeTypeEnum {\r\n  Left,\r\n  Right,\r\n  Top,\r\n  Bottom,\r\n}\r\n","import { OriginRectType } from \"../types\";\r\n\r\nexport default function getAnimateOrigin(originRect: OriginRectType): string | null {\r\n  if (originRect) {\r\n    const { innerWidth, innerHeight } = window;\r\n    // 动画的元素宽高为 0，计算触发的点的中心到中点的距离即是 AnimateOrigin（粗略计算）\r\n    const xOrigin = originRect.left + originRect.width / 2 - innerWidth / 2;\r\n    const yOrigin = originRect.top + originRect.height / 2 - innerHeight / 2;\r\n    return `${xOrigin}px ${yOrigin}px`;\r\n  }\r\n  return null;\r\n}\r\n","/**\r\n * 当前设备是否支持触摸事件\r\n */\r\nconst isTouchDevice = typeof document !== 'undefined' && 'ontouchstart' in document.documentElement;\r\n\r\nexport default isTouchDevice;\r\n","/**\r\n * 图片间隔\r\n */\r\nexport const horizontalOffset = 20;\r\n\r\n/**\r\n * 最小初始响应距离\r\n */\r\nexport const minStartTouchOffset = 10;\r\n\r\n/**\r\n * 最小切换图片距离\r\n */\r\nexport const minSwitchImageOffset = 40;\r\n\r\n/**\r\n * 最大缩放度（若图片足够大，则会超出该值）\r\n */\r\nexport const maxScale = 6;\r\n","import debounce from 'lodash-es/debounce';\r\n\r\nexport type TapFuncType = (clientX: number, clientY: number, e: TouchEvent | MouseEvent) => void;\r\n\r\nexport default function withContinuousTap(\r\n  singleTap: TapFuncType,\r\n  doubleTap: TapFuncType\r\n): TapFuncType {\r\n  // 当前连续点击次数\r\n  let continuousCount = 0;\r\n\r\n  const withSingleTap = debounce((...args: [number, number, TouchEvent | MouseEvent]) => {\r\n    continuousCount = 0;\r\n    singleTap(...args);\r\n  }, 300);\r\n\r\n  return function invokeTap(...args) {\r\n    continuousCount += 1;\r\n    withSingleTap(...args);\r\n    if (continuousCount >= 2) {\r\n      withSingleTap.cancel();\r\n      continuousCount = 0;\r\n      doubleTap(...args);\r\n    }\r\n  };\r\n}\r\n","/**\r\n * 获取移动或缩放之后的中心点\r\n */\r\nexport default function getPositionOnMoveOrScale({\r\n  x,\r\n  y,\r\n  clientX,\r\n  clientY,\r\n  fromScale,\r\n  toScale\r\n}: {\r\n  x: number,\r\n  y: number,\r\n  clientX: number,\r\n  clientY: number,\r\n  fromScale: number,\r\n  toScale: number\r\n}): {\r\n  x: number,\r\n  y: number,\r\n  scale: number,\r\n} {\r\n  const { innerWidth, innerHeight } = window;\r\n  // 缩放前的图片的中心坐标\r\n  const imageCenterClientX = innerWidth / 2 + x;\r\n  const imageCenterClientY = innerHeight / 2 + y;\r\n  // 放大偏移量\r\n  const offsetScale = toScale / fromScale;\r\n  // 缩放后的偏移量(为保证点击的点相对于视图位置不变，需要将缩放多出来的尺寸通过 translate 平衡掉)\r\n  const originX = -(clientX - imageCenterClientX) * (offsetScale - 1);\r\n  const originY = -(clientY - imageCenterClientY) * (offsetScale - 1);\r\n\r\n  return {\r\n    x: originX + x,\r\n    y: originY + y,\r\n    scale: toScale,\r\n  };\r\n}\r\n","import { EdgeTypeEnum } from '../types';\r\n\r\n/**\r\n * 获取图片拖拽到边缘需要的值\r\n */\r\nexport function getEdgeInfo({\r\n  width,\r\n  height,\r\n  scale,\r\n  rotate,\r\n}: {\r\n  width: number,\r\n  height: number,\r\n  scale: number,\r\n  rotate: number\r\n}): {\r\n  edgeLeft: number,\r\n  edgeRight: number,\r\n  edgeTop: number,\r\n  edgeBottom: number,\r\n} {\r\n  // 如果图片不是水平，则调换宽高\r\n  const isVertical = rotate % 180 !== 0;\r\n  if (isVertical) {\r\n    [width, height] = [height, width];\r\n  }\r\n\r\n  const { innerWidth, innerHeight } = window;\r\n  const currentWidth = width * scale;\r\n  const currentHeight = height * scale;\r\n\r\n  let edgeLeft, edgeRight, edgeTop, edgeBottom;\r\n\r\n  if (currentWidth > innerWidth) {\r\n    edgeLeft = (currentWidth - innerWidth) / 2;\r\n    edgeRight = -(currentWidth - innerWidth) / 2;\r\n  } else {\r\n    edgeLeft = 0;\r\n    edgeRight = 0;\r\n  }\r\n\r\n  if (currentHeight > innerHeight) {\r\n    edgeTop = (currentHeight - innerHeight) / 2;\r\n    edgeBottom = -(currentHeight - innerHeight) / 2;\r\n  } else {\r\n    edgeTop = 0;\r\n    edgeBottom = 0;\r\n  }\r\n\r\n  return {\r\n    edgeLeft,\r\n    edgeRight,\r\n    edgeTop,\r\n    edgeBottom,\r\n  };\r\n}\r\n\r\n/**\r\n * 获取边缘类型\r\n */\r\nexport function getEdgeTypes({\r\n  width,\r\n  height,\r\n  scale,\r\n  rotate,\r\n  x,\r\n  y,\r\n}: {\r\n  width: number,\r\n  height: number,\r\n  scale: number,\r\n  rotate: number,\r\n  x: number,\r\n  y: number,\r\n}): EdgeTypeEnum[] {\r\n  const position = getEdgeInfo({ width, height, scale, rotate });\r\n  const edgeTypes: EdgeTypeEnum[] = [];\r\n\r\n  if (x === position.edgeLeft) {\r\n    edgeTypes.push(EdgeTypeEnum.Left);\r\n  }\r\n  if (x === position.edgeRight) {\r\n    edgeTypes.push(EdgeTypeEnum.Right);\r\n  }\r\n  if (y === position.edgeTop) {\r\n    edgeTypes.push(EdgeTypeEnum.Top);\r\n  }\r\n  if (y === position.edgeBottom) {\r\n    edgeTypes.push(EdgeTypeEnum.Bottom);\r\n  }\r\n\r\n  return edgeTypes;\r\n}\r\n\r\n/**\r\n * 获取标准值\r\n */\r\nexport function getStandardPosition({\r\n  width,\r\n  height,\r\n  scale,\r\n  rotate,\r\n  x,\r\n  y,\r\n}: {\r\n  width: number,\r\n  height: number,\r\n  scale: number,\r\n  rotate: number,\r\n  x: number,\r\n  y: number,\r\n}): {\r\n  x: number,\r\n  y: number,\r\n  scale: number,\r\n} {\r\n  const { edgeLeft, edgeRight, edgeTop, edgeBottom } = getEdgeInfo({ width, height, scale, rotate });\r\n\r\n  if (x > edgeLeft) {\r\n    x = edgeLeft;\r\n  }\r\n  if (x < edgeRight) {\r\n    x = edgeRight;\r\n  }\r\n  if (y > edgeTop) {\r\n    y = edgeTop;\r\n  }\r\n  if (y < edgeBottom) {\r\n    y = edgeBottom;\r\n  }\r\n\r\n  return { x, y, scale };\r\n}\r\n","/**\r\n * 从 Touch 事件中获取两个触控中心的位置\r\n * @param e TouchEvent\r\n */\r\nexport default function getMultipleTouchPosition(e: TouchEvent): {\r\n  clientX: number,\r\n  clientY: number,\r\n  touchLength: number\r\n} {\r\n  const { clientX, clientY } = e.touches[0];\r\n  if (e.touches.length >= 2) {\r\n    const { clientX: nextClientX, clientY: nextClientY } = e.touches[1];\r\n    return {\r\n      clientX: (clientX + nextClientX) / 2,\r\n      clientY: (clientY + nextClientY) / 2,\r\n      touchLength: Math.sqrt(Math.pow(nextClientX - clientX, 2) + Math.pow(nextClientY - clientY, 2)),\r\n    };\r\n  }\r\n  return { clientX, clientY, touchLength: 0 };\r\n}\r\n","import { Ref, ref } from 'vue';\r\nimport isTouchDevice from '../utils/isTouchDevice';\r\nimport throttle from 'lodash-es/throttle';\r\nimport { TouchTypeEnum, EdgeTypeEnum } from '../types';\r\nimport { minStartTouchOffset, maxScale } from '../constant';\r\nimport withContinuousTap from '../utils/withContinuousTap';\r\nimport getPositionOnMoveOrScale from '../utils/getPositionOnMoveOrScale';\r\nimport { getStandardPosition, getEdgeTypes } from '../utils/getEdgeInfo';\r\nimport getMultipleTouchPosition from '../utils/getMultipleTouchPosition';\r\n\r\ntype useMoveImageReturn = {\r\n  x: Ref<number>;\r\n  y: Ref<number>;\r\n  scale: Ref<number>;\r\n  rotate: Ref<number>;\r\n  touched: Ref<boolean>;\r\n  handleMouseDown: (e: MouseEvent) => void;\r\n  handleTouchStart: (e: TouchEvent) => void;\r\n  handleWheel: (e: WheelEvent) => void;\r\n  handleRotateLeft: () => void;\r\n  handleRotateRight: () => void;\r\n}\r\n\r\nexport default function useMoveImage(\r\n  width: Ref<number>,\r\n  height: Ref<number>,\r\n  naturalWidth: Ref<number>,\r\n  naturalHeight: Ref<number>,\r\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\r\n  onTouchStart: (clientX: number, clientY: number) => void,\r\n  onTouchMove: (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => void,\r\n  onTouchEnd: (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => void,\r\n  onSingleTap: (clientX: number, clientY: number, e: MouseEvent | TouchEvent) => void,\r\n): useMoveImageReturn {\r\n  // 图片 x 偏移量\r\n  const x = ref(0);\r\n  // 图片 y 偏移量\r\n  const y = ref(0);\r\n  // 图片缩放程度\r\n  const scale = ref(1);\r\n  // 图片旋转角度\r\n  const rotate = ref(0);\r\n  // 图片是否处于触摸状态\r\n  const touched = ref(false);\r\n  // 触摸开始时 x 的坐标\r\n  const clientX = ref(0);\r\n  // 触摸开始时 y 的坐标\r\n  const clientY = ref(0);\r\n  // 初始触摸状态\r\n  const touchType = ref(TouchTypeEnum.Normal);\r\n  // 上一次图片的 x 偏移量\r\n  const lastX = ref(0);\r\n  // 上一次图片的 y 偏移量\r\n  const lastY = ref(0);\r\n  // 上一次 touch 的长度\r\n  const lastTouchLength = ref(0);\r\n  // 上一次的图片缩放程度\r\n  const lastScale = ref(1);\r\n  // 边缘状态(用于缩放图片判断)\r\n  let edgeTypes: EdgeTypeEnum[] = [];\r\n\r\n  const handleMouseDown = (e: MouseEvent) => {\r\n    if (isTouchDevice) return;\r\n\r\n    handleDown(e.clientX, e.clientY, 0);\r\n\r\n    window.addEventListener('mousemove', handleMouseMove);\r\n    window.addEventListener('mouseup', handleMouseUp);\r\n  };\r\n\r\n  const handleTouchStart = (e: TouchEvent) => {\r\n    if (!isTouchDevice) return;\r\n\r\n    const touch = getMultipleTouchPosition(e);\r\n    handleDown(touch.clientX, touch.clientY, touch.touchLength);\r\n\r\n    window.addEventListener('touchmove', handleTouchMove);\r\n    window.addEventListener('touchend', handleTouchEnd);\r\n  };\r\n\r\n  const handleDown = (newClientX: number, newClientY: number, touchLength: number) => {\r\n    touched.value = true;\r\n    clientX.value = newClientX;\r\n    clientY.value = newClientY;\r\n    lastTouchLength.value = touchLength;\r\n    lastScale.value = scale.value;\r\n    edgeTypes = getEdgeTypes({\r\n      width: width.value,\r\n      height: height.value,\r\n      scale: scale.value,\r\n      rotate: rotate.value,\r\n      x: lastX.value,\r\n      y: lastY.value\r\n    });\r\n\r\n    onTouchStart(newClientX, newClientY);\r\n  };\r\n\r\n  const handleMouseMove = (e: MouseEvent) => {\r\n    if (isTouchDevice || !touched.value) return;\r\n\r\n    handleMove(e.clientX, e.clientY, 0);\r\n  };\r\n\r\n  const handleTouchMove = (e: TouchEvent) => {\r\n    if (!isTouchDevice || !touched.value) return;\r\n\r\n    const touch = getMultipleTouchPosition(e);\r\n    handleMove(touch.clientX, touch.clientY, touch.touchLength);\r\n  };\r\n\r\n  const handleMove = throttle((newClientX: number, newClientY: number, touchLength: number) => {\r\n    // 初始化触摸状态\r\n    if (touchType.value === TouchTypeEnum.Normal) {\r\n      if (scale.value !== 1 || touchLength) {\r\n        touchType.value = TouchTypeEnum.Scale;\r\n      } else {\r\n        const isMoveX = Math.abs(newClientX - clientX.value) > minStartTouchOffset;\r\n        const isMoveY = Math.abs(newClientY - clientY.value) > minStartTouchOffset;\r\n\r\n        if (!isMoveX && !isMoveY) return;\r\n\r\n        // 水平方向优先\r\n        touchType.value = isMoveX ? TouchTypeEnum.X : TouchTypeEnum.Y;\r\n      }\r\n    }\r\n\r\n    onTouchMove(touchType.value, newClientX, newClientY, lastScale.value, edgeTypes);\r\n\r\n    const newX = newClientX - clientX.value;\r\n    const newY = newClientY - clientY.value;\r\n    if (touchType.value === TouchTypeEnum.Y) {\r\n      x.value = newX + lastX.value;\r\n      y.value = newY + lastY.value;\r\n    }\r\n    if (touchType.value === TouchTypeEnum.Scale) {\r\n      if (touchLength) {\r\n        const endScale = scale.value + ((touchLength - lastTouchLength.value) / 100 / 2) * scale.value;\r\n        const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\r\n        handleToScale(toScale, newClientX, newClientY);\r\n        lastTouchLength.value = touchLength;\r\n      } else {\r\n        // 处于左边缘情况，右划交给父级处理，处于右边缘情况，左划交给父级处理\r\n        if (\r\n          !(newX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) &&\r\n          !(newX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\r\n        ) {\r\n          x.value = newX + lastX.value;\r\n        }\r\n        y.value = newY + lastY.value;\r\n      }\r\n    }\r\n  }, 8, { trailing: false });\r\n\r\n  const handleMouseUp = (e: MouseEvent) => {\r\n    if (isTouchDevice) return;\r\n\r\n    handleUp(e.clientX, e.clientY, e);\r\n\r\n    window.removeEventListener('mousemove', handleMouseMove);\r\n    window.removeEventListener('mouseup', handleMouseUp);\r\n  };\r\n\r\n  const handleTouchEnd = (e: TouchEvent) => {\r\n    if (!isTouchDevice) return;\r\n\r\n    const touch = e.changedTouches[0];\r\n    handleUp(touch.clientX, touch.clientY, e);\r\n\r\n    window.removeEventListener('touchmove', handleTouchMove);\r\n    window.removeEventListener('touchend', handleTouchEnd);\r\n  };\r\n\r\n  const onDoubleTap = (newClientX: number, newClientY: number) => {\r\n    if (touchType.value !== TouchTypeEnum.Normal) return;\r\n\r\n    if (scale.value === 1) {\r\n      const toScale = Math.max(2, naturalWidth.value / width.value);\r\n      const position = getPositionOnMoveOrScale({\r\n        x: x.value,\r\n        y: y.value,\r\n        clientX: newClientX,\r\n        clientY: newClientY,\r\n        fromScale: scale.value,\r\n        toScale,\r\n      });\r\n\r\n      x.value = position.x;\r\n      y.value = position.y;\r\n      scale.value = position.scale;\r\n    } else {\r\n      x.value = 0;\r\n      y.value = 0;\r\n      scale.value = 1;\r\n    }\r\n  };\r\n\r\n  const onTap = withContinuousTap(onSingleTap, onDoubleTap);\r\n\r\n  const handleUp = (newClientX: number, newClientY: number, e: TouchEvent | MouseEvent) => {\r\n    if (clientX.value === newClientX && clientY.value === newClientY) {\r\n      onTap(newClientX, newClientY, e);\r\n    }\r\n\r\n    onTouchEnd(touchType.value, newClientX, newClientY, lastScale.value, edgeTypes);\r\n\r\n    if (touchType.value === TouchTypeEnum.Y) {\r\n      x.value = 0;\r\n      y.value = 0;\r\n    }\r\n\r\n    if (touchType.value === TouchTypeEnum.Scale) {\r\n      setStandardPosition({\r\n        width: width.value,\r\n        height: height.value,\r\n        scale: scale.value,\r\n        rotate: rotate.value,\r\n        x: x.value,\r\n        y: y.value\r\n      });\r\n    }\r\n\r\n    touched.value = false;\r\n    touchType.value = TouchTypeEnum.Normal;\r\n    clientX.value = 0;\r\n    clientY.value = 0;\r\n    lastX.value = x.value;\r\n    lastY.value = y.value;\r\n  };\r\n\r\n  const handleWheel = (e: WheelEvent) => {\r\n    const endScale = scale.value - e.deltaY / 100 / 2;\r\n    const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\r\n    handleToScale(toScale, e.clientX, e.clientY);\r\n  };\r\n\r\n  const handleToScale = (newScale: number, newClientX: number, newClientY: number) => {\r\n    const position = getPositionOnMoveOrScale({\r\n      x: x.value,\r\n      y: y.value,\r\n      clientX: newClientX,\r\n      clientY: newClientY,\r\n      fromScale: scale.value,\r\n      toScale: newScale,\r\n    });\r\n\r\n    setStandardPosition({\r\n      width: width.value,\r\n      height: height.value,\r\n      scale: position.scale,\r\n      rotate: rotate.value,\r\n      x: position.x,\r\n      y: position.y\r\n    });\r\n  };\r\n\r\n  const setStandardPosition = (position: {\r\n    width: number; height: number; scale: number; rotate: number; x: number, y: number\r\n  }) => {\r\n    const standardPosition = getStandardPosition(position);\r\n    x.value = standardPosition.x;\r\n    y.value = standardPosition.y;\r\n    lastX.value = standardPosition.x;\r\n    lastY.value = standardPosition.y;\r\n    scale.value = standardPosition.scale;\r\n  };\r\n\r\n  const handleRotateLeft = () => {\r\n    rotate.value = rotate.value - 90;\r\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\r\n    setStandardPosition({\r\n      width: width.value,\r\n      height: height.value,\r\n      scale: scale.value,\r\n      rotate: rotate.value,\r\n      x: x.value,\r\n      y: y.value\r\n    });\r\n  };\r\n\r\n  const handleRotateRight = () => {\r\n    rotate.value = rotate.value + 90;\r\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\r\n    setStandardPosition({\r\n      width: width.value,\r\n      height: height.value,\r\n      scale: scale.value,\r\n      rotate: rotate.value,\r\n      x: x.value,\r\n      y: y.value\r\n    });\r\n  };\r\n\r\n  return {\r\n    x,\r\n    y,\r\n    scale,\r\n    touched,\r\n    handleMouseDown,\r\n    handleTouchStart,\r\n    handleWheel,\r\n    rotate,\r\n    handleRotateLeft,\r\n    handleRotateRight\r\n  };\r\n}\r\n","<template>\r\n  <div\r\n    v-if=\"loaded\"\r\n    class=\"PhotoView__PhotoWrap\"\r\n    :style=\"{\r\n      width: `${width}px`,\r\n      height: `${height}px`\r\n    }\"\r\n  >\r\n    <div\r\n      class=\"PhotoView__PhotoBox\"\r\n      :class=\"{\r\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\r\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\r\n      }\"\r\n      :style=\"{\r\n        transformOrigin: getAnimateOrigin(originRect) || 'center',\r\n        width: showAnimateType === ShowAnimateEnum.In || showAnimateType === ShowAnimateEnum.Out ? '0' : '100%'\r\n      }\"\r\n    >\r\n      <img\r\n        class=\"PhotoView__Photo\"\r\n        :src=\"src\"\r\n        :style=\"{\r\n          width: `${width}px`,\r\n          height: `${height}px`,\r\n          transform: getTransform(),\r\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\r\n        }\"\r\n        @mousedown.prevent=\"handleMouseDown\"\r\n        @touchstart.prevent=\"handleTouchStart\"\r\n        @wheel=\"handleWheel\"\r\n      >\r\n    </div>\r\n  </div>\r\n  <spinner v-else />\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent, PropType, toRefs } from 'vue';\r\nimport Spinner from './Spinner.vue';\r\nimport useLoadImage from './useLoadImage';\r\nimport useWindowResize from './useWindowResize';\r\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\r\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\r\nimport useMoveImage from './useMoveImage';\r\n\r\nexport default defineComponent({\r\n  name: 'PhotoView',\r\n  components: {\r\n    Spinner\r\n  },\r\n  props: {\r\n    /**\r\n     * 图片地址\r\n     */\r\n    src: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    /**\r\n     * 触发打开模态框的位置信息\r\n     */\r\n    originRect: {\r\n      type: Object as PropType<OriginRectType>,\r\n      default: null,\r\n    },\r\n    /**\r\n     * 动画类型\r\n     */\r\n    showAnimateType: {\r\n      type: Number as PropType<ShowAnimateEnum>,\r\n      default: null,\r\n    }\r\n  },\r\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\r\n  setup(props, { emit }) {\r\n    const { src } = toRefs(props);\r\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\r\n\r\n    const onTouchStart = (clientX: number, clientY: number) => {\r\n      emit('touchStart', clientX, clientY);\r\n    };\r\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\r\n      emit('touchMove', touchType, clientX, clientY, lastScale, edgeTypes);\r\n    };\r\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\r\n      emit('touchEnd', touchType, clientX, clientY, lastScale, edgeTypes);\r\n    };\r\n    const onSingleTap = (clientX: number, clientY: number, e: MouseEvent | TouchEvent) => {\r\n      emit('singleTap', clientX, clientY, e);\r\n    };\r\n\r\n    const {\r\n      x, y, scale, rotate, touched,\r\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\r\n    } = useMoveImage(\r\n      width, height, naturalWidth, naturalHeight,\r\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\r\n    );\r\n\r\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\r\n\r\n    return {\r\n      width,\r\n      height,\r\n      loaded,\r\n      x,\r\n      y,\r\n      scale,\r\n      touched,\r\n      handleMouseDown,\r\n      handleTouchStart,\r\n      handleWheel,\r\n      rotate,\r\n      handleRotateLeft,\r\n      handleRotateRight\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      ShowAnimateEnum,\r\n      // 翻转\r\n      isFlipHorizontal: false,\r\n      isFlipVertical: false,\r\n    };\r\n  },\r\n  methods: {\r\n    getAnimateOrigin,\r\n    toggleFlipHorizontal() {\r\n      this.isFlipHorizontal = !this.isFlipHorizontal;\r\n    },\r\n    toggleFlipVertical() {\r\n      this.isFlipVertical = !this.isFlipVertical;\r\n    },\r\n    getTransform() {\r\n      const scaleX = `${this.isFlipHorizontal ? '-' : ''}${this.scale}`;\r\n      const scaleY = `${this.isFlipVertical ? '-' : ''}${this.scale}`;\r\n      const transform: Record<string, string> = {\r\n        matrix: `${scaleX}, 0, 0, ${scaleY}, ${this.x}, ${this.y}`,\r\n      };\r\n      if (this.rotate) {\r\n        transform.rotate = `${this.rotate}deg`;\r\n      }\r\n\r\n      let str = '';\r\n      Object.keys(transform).forEach(name => {\r\n        str += `${name}(${transform[name]})`;\r\n      });\r\n\r\n      return str;\r\n    }\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@keyframes PhotoView__animateIn {\r\n  from {\r\n    opacity: 0.4;\r\n    transform: scale(0.2);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n@keyframes PhotoView__animateOut {\r\n  from {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n  to {\r\n    opacity: 0;\r\n    transform: scale(0.2);\r\n  }\r\n}\r\n\r\n.PhotoView__PhotoWrap {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  .PhotoView__PhotoBox {\r\n    width: 0;\r\n    height: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    &.PhotoView__animateIn {\r\n      opacity: 0.4;\r\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\r\n    }\r\n\r\n    &.PhotoView__animateOut {\r\n      opacity: 1;\r\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\r\n    }\r\n\r\n    .PhotoView__Photo {\r\n      touch-action: none;\r\n      cursor: grab;\r\n      display: block;\r\n\r\n      &:active {\r\n        cursor: grabbing;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { Ref, watch } from 'vue';\r\n\r\nexport default function useBodyEffect(visible: Ref<boolean>): void {\r\n  const { style } = document.body;\r\n  const originalOverflow = style.overflow;\r\n\r\n  watch(visible, () => {\r\n    if (visible.value) {\r\n      style.overflow = 'hidden';\r\n    } else {\r\n      style.overflow = originalOverflow;\r\n    }\r\n  });\r\n}\r\n","import { ref, Ref, onBeforeUnmount } from 'vue';\r\nimport throttle from 'lodash-es/throttle';\r\n\r\nexport default function useInnerWidth(): { innerWidth: Ref<number> } {\r\n  const innerWidth = ref(window.innerWidth);\r\n\r\n  const handleResize = throttle(() => {\r\n    innerWidth.value = window.innerWidth;\r\n  }, 8);\r\n\r\n  window.addEventListener('resize', handleResize);\r\n\r\n  onBeforeUnmount(() => {\r\n    window.removeEventListener('resize', handleResize);\r\n  });\r\n\r\n  return {\r\n    innerWidth\r\n  };\r\n}\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"44\"\r\n    height=\"44\"\r\n    viewBox=\"0 0 768 768\"\r\n  >\r\n    <path\r\n      fill=\"#FFF\"\r\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\r\n    />\r\n  </svg>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"44\"\r\n    height=\"44\"\r\n    viewBox=\"0 0 768 768\"\r\n  >\r\n    <path\r\n      d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\"\r\n    />\r\n  </svg>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({});\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\r\n","<template>\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"44\"\r\n    height=\"44\"\r\n    viewBox=\"0 0 768 768\"\r\n  >\r\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\r\n  </svg>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","<template>\r\n  <svg\r\n    viewBox=\"0 0 1024 1024\"\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"44\"\r\n    height=\"44\"\r\n  >\r\n    <path\r\n      fill=\"#FFF\"\r\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\r\n    />\r\n  </svg>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","<template>\r\n  <svg\r\n    viewBox=\"0 0 1000 1000\"\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"44\"\r\n    height=\"44\"\r\n  >\r\n    <path\r\n      fill=\"#FFF\"\r\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\r\n    />\r\n  </svg>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","<template>\r\n  <svg\r\n    viewBox=\"0 0 1024 1024\"\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"44\"\r\n    height=\"44\"\r\n  >\r\n    <path\r\n      fill=\"#FFF\"\r\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\r\n    />\r\n  </svg>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","<template>\r\n  <svg\r\n    viewBox=\"0 0 1024 1024\"\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"44\"\r\n    height=\"44\"\r\n  >\r\n    <path\r\n      fill=\"#FFF\"\r\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\r\n    />\r\n  </svg>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","<template>\r\n  <svg\r\n    viewBox=\"0 0 1068 1024\"\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    p-id=\"2740\"\r\n    width=\"44\"\r\n    height=\"44\"\r\n  >\r\n    <path\r\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\r\n      fill=\"#FFF\"\r\n    />\r\n    <path\r\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\r\n      fill=\"#FFF\"\r\n    />\r\n    <path\r\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\r\n      fill=\"#FFF\"\r\n    />\r\n    <path\r\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\r\n      fill=\"#FFF\"\r\n    />\r\n  </svg>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","import { Ref, ref, watch } from 'vue';\r\nimport { ItemType, ShowAnimateEnum, OriginRectType } from '../types';\r\n\r\ntype useAnimationHandleReturn = {\r\n  photoVisible: Ref<boolean>;\r\n  showAnimateType: Ref<ShowAnimateEnum>;\r\n  originRect: Ref<OriginRectType>;\r\n  onShowAnimateEnd: () => void;\r\n}\r\n\r\nexport default function useAnimationHandle(visible: Ref<boolean>, currentItem: Ref<ItemType>): useAnimationHandleReturn {\r\n  const photoVisible = ref(visible.value);\r\n  const showAnimateType = ref<ShowAnimateEnum>(ShowAnimateEnum.None);\r\n  const originRect = ref<OriginRectType>(null);\r\n\r\n  watch(visible, () => {\r\n    const originRef = currentItem.value.originRef;\r\n    // 点击打开按钮和关闭时收集位置信息，用于过渡动画\r\n    if (originRef && originRef.nodeType === 1 && originRef.children.length > 0) {\r\n      const { top, left, width, height } = originRef.getBoundingClientRect();\r\n      originRect.value = {\r\n        left, top, width, height\r\n      };\r\n    } else {\r\n      originRect.value = null;\r\n    }\r\n\r\n    if (visible.value) {\r\n      // 设置动画类型\r\n      showAnimateType.value = ShowAnimateEnum.In;\r\n      // 显示图片\r\n      photoVisible.value = true;\r\n    } else {\r\n      // 设置动画类型\r\n      showAnimateType.value = ShowAnimateEnum.Out;\r\n    }\r\n  });\r\n\r\n  // 动画结束的回调\r\n  const onShowAnimateEnd = () => {\r\n    // 动画完成才关闭弹窗\r\n    if (showAnimateType.value === ShowAnimateEnum.Out) {\r\n      photoVisible.value = false;\r\n    }\r\n    showAnimateType.value = ShowAnimateEnum.None;\r\n  };\r\n\r\n  return {\r\n    photoVisible,\r\n    showAnimateType,\r\n    originRect,\r\n    onShowAnimateEnd\r\n  };\r\n}\r\n","//\n//\n//\n//\n//\n//\n\nvar script = {\n  name: 'teleport',\n  props: {\n    to: {\n      type: String,\n      required: true,\n    },\n    where: {\n      type: String,\n      default: 'after',\n    },\n    disabled: Boolean,\n  },\n  data: function data() {\n    return {\n      nodes: [],\n      waiting: false,\n      observer: null,\n      parent: null,\n    };\n  },\n  watch: {\n    to: 'maybeMove',\n    where: 'maybeMove',\n    disabled: function disabled(value) {\n      var this$1 = this;\n\n      if (value) {\n        this.disable();\n        // Ensure all event done.\n        this.$nextTick(function () {\n          this$1.teardownObserver();\n        });\n      } else {\n        this.bootObserver();\n        this.move();\n      }\n    },\n  },\n  mounted: function mounted() {\n    // Store a reference to the nodes\n    this.nodes = Array.from(this.$el.childNodes);\n\n    if (!this.disabled) {\n      this.bootObserver();\n    }\n\n    // Move slot content to target\n    this.maybeMove();\n  },\n  beforeDestroy: function beforeDestroy() {\n    // Fix nodes reference\n    this.nodes = this.getComponentChildrenNode();\n\n    // Move back\n    this.disable();\n\n    // Stop observing\n    this.teardownObserver();\n  },\n  computed: {\n    classes: function classes() {\n      if (this.disabled) {\n        return ['teleporter'];\n      }\n\n      return ['teleporter', 'hidden'];\n    },\n  },\n  methods: {\n    maybeMove: function maybeMove() {\n      if (!this.disabled) {\n        this.move();\n      }\n    },\n    move: function move() {\n      this.waiting = false;\n\n      this.parent = document.querySelector(this.to);\n\n      if (!this.parent) {\n        this.disable();\n\n        this.waiting = true;\n\n        return;\n      }\n\n      if (this.where === 'before') {\n        this.parent.prepend(this.getFragment());\n      } else {\n        this.parent.appendChild(this.getFragment());\n      }\n    },\n    disable: function disable() {\n      this.$el.appendChild(this.getFragment());\n      this.parent = null;\n    },\n    // Using a fragment is faster because it'll trigger only a single reflow\n    // See https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n    getFragment: function getFragment() {\n      var fragment = document.createDocumentFragment();\n\n      this.nodes.forEach(function (node) { return fragment.appendChild(node); });\n\n      return fragment;\n    },\n    onMutations: function onMutations(mutations) {\n      var this$1 = this;\n\n      // Makes sure the move operation is only done once\n      var shouldMove = false;\n\n      for (var i = 0; i < mutations.length; i++) {\n        var mutation = mutations[i];\n        var filteredAddedNodes = Array.from(mutation.addedNodes).filter(function (node) { return !this$1.nodes.includes(node); });\n\n        if (Array.from(mutation.removedNodes).includes(this.parent)) {\n          this.disable();\n          this.waiting = !this.disabled;\n        } else if (this.waiting && filteredAddedNodes.length > 0) {\n          shouldMove = true;\n        }\n      }\n\n      if (shouldMove) {\n        this.move();\n      }\n    },\n    bootObserver: function bootObserver() {\n      var this$1 = this;\n\n      if (this.observer) {\n        return;\n      }\n\n      this.observer = new MutationObserver(function (mutations) { return this$1.onMutations(mutations); });\n\n      this.observer.observe(document.body, {\n        childList: true,\n        subtree: true,\n        attributes: false,\n        characterData: false,\n      });\n\n      if (this.childObserver) {\n        return;\n      }\n      // watch childNodes change\n      this.childObserver = new MutationObserver(function (mutations) {\n        var childChangeRecord = mutations.find(function (i) { return i.target === this$1.$el; });\n        if (childChangeRecord) {\n          // Remove old nodes before update position.\n          this$1.nodes.forEach(function (node) { return node.parentNode && node.parentNode.removeChild(node); });\n          this$1.nodes = this$1.getComponentChildrenNode();\n          this$1.maybeMove();\n        }\n      });\n\n      this.childObserver.observe(this.$el, {\n        childList: true,\n        subtree: false,\n        attributes: false,\n        characterData: false,\n      });\n    },\n    teardownObserver: function teardownObserver() {\n      if (this.observer) {\n        this.observer.disconnect();\n        this.observer = null;\n      }\n      if (this.childObserver) {\n        this.childObserver.disconnect();\n        this.childObserver = null;\n      }\n    },\n    getComponentChildrenNode: function getComponentChildrenNode() {\n      return this.$vnode.componentOptions.children\n        .map(function (i) { return i.elm; })\n        .filter(function (i) { return i; });\n    },\n  },\n};\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    var options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    var hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            var originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            var existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nvar isOldIE = typeof navigator !== 'undefined' &&\r\n    /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\r\nfunction createInjector(context) {\r\n    return function (id, style) { return addStyle(id, style); };\r\n}\r\nvar HEAD;\r\nvar styles = {};\r\nfunction addStyle(id, css) {\r\n    var group = isOldIE ? css.media || 'default' : id;\r\n    var style = styles[group] || (styles[group] = { ids: new Set(), styles: [] });\r\n    if (!style.ids.has(id)) {\r\n        style.ids.add(id);\r\n        var code = css.source;\r\n        if (css.map) {\r\n            // https://developer.chrome.com/devtools/docs/javascript-debugging\r\n            // this makes source maps inside style tags work properly in Chrome\r\n            code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\r\n            // http://stackoverflow.com/a/26603875\r\n            code +=\r\n                '\\n/*# sourceMappingURL=data:application/json;base64,' +\r\n                    btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\r\n                    ' */';\r\n        }\r\n        if (!style.element) {\r\n            style.element = document.createElement('style');\r\n            style.element.type = 'text/css';\r\n            if (css.media)\r\n                { style.element.setAttribute('media', css.media); }\r\n            if (HEAD === undefined) {\r\n                HEAD = document.head || document.getElementsByTagName('head')[0];\r\n            }\r\n            HEAD.appendChild(style.element);\r\n        }\r\n        if ('styleSheet' in style.element) {\r\n            style.styles.push(code);\r\n            style.element.styleSheet.cssText = style.styles\r\n                .filter(Boolean)\r\n                .join('\\n');\r\n        }\r\n        else {\r\n            var index = style.ids.size - 1;\r\n            var textNode = document.createTextNode(code);\r\n            var nodes = style.element.childNodes;\r\n            if (nodes[index])\r\n                { style.element.removeChild(nodes[index]); }\r\n            if (nodes.length)\r\n                { style.element.insertBefore(textNode, nodes[index]); }\r\n            else\r\n                { style.element.appendChild(textNode); }\r\n        }\r\n    }\r\n}\n\n/* script */\nvar __vue_script__ = script;\n\n/* template */\nvar __vue_render__ = function() {\n  var _vm = this;\n  var _h = _vm.$createElement;\n  var _c = _vm._self._c || _h;\n  return _c(\"div\", { class: _vm.classes }, [_vm._t(\"default\")], 2)\n};\nvar __vue_staticRenderFns__ = [];\n__vue_render__._withStripped = true;\n\n  /* style */\n  var __vue_inject_styles__ = function (inject) {\n    if (!inject) { return }\n    inject(\"data-v-50f4b45b_0\", { source: \".hidden[data-v-50f4b45b] {\\n  visibility: hidden;\\n  display: none;\\n}\\n\\n/*# sourceMappingURL=Teleport.vue.map */\", map: {\"version\":3,\"sources\":[\"/home/shodan/Projects/vue2-teleport/src/Teleport.vue\",\"Teleport.vue\"],\"names\":[],\"mappings\":\"AA2LA;EACA,kBAAA;EACA,aAAA;AC1LA;;AAEA,uCAAuC\",\"file\":\"Teleport.vue\",\"sourcesContent\":[\"<template>\\n  <div :class=\\\"classes\\\">\\n    <slot/>\\n  </div>\\n</template>\\n\\n<script>\\nexport default {\\n  name: 'teleport',\\n  props: {\\n    to: {\\n      type: String,\\n      required: true,\\n    },\\n    where: {\\n      type: String,\\n      default: 'after',\\n    },\\n    disabled: Boolean,\\n  },\\n  data() {\\n    return {\\n      nodes: [],\\n      waiting: false,\\n      observer: null,\\n      parent: null,\\n    };\\n  },\\n  watch: {\\n    to: 'maybeMove',\\n    where: 'maybeMove',\\n    disabled(value) {\\n      if (value) {\\n        this.disable();\\n        // Ensure all event done.\\n        this.$nextTick(() => {\\n          this.teardownObserver();\\n        });\\n      } else {\\n        this.bootObserver();\\n        this.move();\\n      }\\n    },\\n  },\\n  mounted() {\\n    // Store a reference to the nodes\\n    this.nodes = Array.from(this.$el.childNodes);\\n\\n    if (!this.disabled) {\\n      this.bootObserver();\\n    }\\n\\n    // Move slot content to target\\n    this.maybeMove();\\n  },\\n  beforeDestroy() {\\n    // Fix nodes reference\\n    this.nodes = this.getComponentChildrenNode();\\n\\n    // Move back\\n    this.disable();\\n\\n    // Stop observing\\n    this.teardownObserver();\\n  },\\n  computed: {\\n    classes() {\\n      if (this.disabled) {\\n        return ['teleporter'];\\n      }\\n\\n      return ['teleporter', 'hidden'];\\n    },\\n  },\\n  methods: {\\n    maybeMove() {\\n      if (!this.disabled) {\\n        this.move();\\n      }\\n    },\\n    move() {\\n      this.waiting = false;\\n\\n      this.parent = document.querySelector(this.to);\\n\\n      if (!this.parent) {\\n        this.disable();\\n\\n        this.waiting = true;\\n\\n        return;\\n      }\\n\\n      if (this.where === 'before') {\\n        this.parent.prepend(this.getFragment());\\n      } else {\\n        this.parent.appendChild(this.getFragment());\\n      }\\n    },\\n    disable() {\\n      this.$el.appendChild(this.getFragment());\\n      this.parent = null;\\n    },\\n    // Using a fragment is faster because it'll trigger only a single reflow\\n    // See https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\\n    getFragment() {\\n      const fragment = document.createDocumentFragment();\\n\\n      this.nodes.forEach(node => fragment.appendChild(node));\\n\\n      return fragment;\\n    },\\n    onMutations(mutations) {\\n      // Makes sure the move operation is only done once\\n      let shouldMove = false;\\n\\n      for (let i = 0; i < mutations.length; i++) {\\n        const mutation = mutations[i];\\n        const filteredAddedNodes = Array.from(mutation.addedNodes).filter(node => !this.nodes.includes(node));\\n\\n        if (Array.from(mutation.removedNodes).includes(this.parent)) {\\n          this.disable();\\n          this.waiting = !this.disabled;\\n        } else if (this.waiting && filteredAddedNodes.length > 0) {\\n          shouldMove = true;\\n        }\\n      }\\n\\n      if (shouldMove) {\\n        this.move();\\n      }\\n    },\\n    bootObserver() {\\n      if (this.observer) {\\n        return;\\n      }\\n\\n      this.observer = new MutationObserver(mutations => this.onMutations(mutations));\\n\\n      this.observer.observe(document.body, {\\n        childList: true,\\n        subtree: true,\\n        attributes: false,\\n        characterData: false,\\n      });\\n\\n      if (this.childObserver) {\\n        return;\\n      }\\n      // watch childNodes change\\n      this.childObserver = new MutationObserver(mutations => {\\n        const childChangeRecord = mutations.find(i => i.target === this.$el);\\n        if (childChangeRecord) {\\n          // Remove old nodes before update position.\\n          this.nodes.forEach((node) => node.parentNode && node.parentNode.removeChild(node));\\n          this.nodes = this.getComponentChildrenNode();\\n          this.maybeMove();\\n        }\\n      });\\n\\n      this.childObserver.observe(this.$el, {\\n        childList: true,\\n        subtree: false,\\n        attributes: false,\\n        characterData: false,\\n      });\\n    },\\n    teardownObserver() {\\n      if (this.observer) {\\n        this.observer.disconnect();\\n        this.observer = null;\\n      }\\n      if (this.childObserver) {\\n        this.childObserver.disconnect();\\n        this.childObserver = null;\\n      }\\n    },\\n    getComponentChildrenNode() {\\n      return this.$vnode.componentOptions.children\\n        .map((i) => i.elm)\\n        .filter((i) => i);\\n    },\\n  },\\n};\\n</script>\\n\\n<style scoped lang=\\\"scss\\\">\\n.hidden {\\n  visibility: hidden;\\n  display: none;\\n}\\n</style>\\n\",\".hidden {\\n  visibility: hidden;\\n  display: none;\\n}\\n\\n/*# sourceMappingURL=Teleport.vue.map */\"]}, media: undefined });\n\n  };\n  /* scoped */\n  var __vue_scope_id__ = \"data-v-50f4b45b\";\n  /* module identifier */\n  var __vue_module_identifier__ = undefined;\n  /* functional template */\n  var __vue_is_functional_template__ = false;\n  /* style inject SSR */\n  \n  /* style inject shadow dom */\n  \n\n  \n  var __vue_component__ = /*#__PURE__*/normalizeComponent(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    false,\n    createInjector,\n    undefined,\n    undefined\n  );\n\n// Taken from https://vuejs.org/v2/cookbook/packaging-sfc-for-npm.html\n\n// Declare install function executed by Vue.use()\nfunction install (Vue) {\n  if (install.installed) { return; }\n\n  install.installed = true;\n  Vue.component('Teleport', __vue_component__);\n}\n\n// Create module definition for Vue.use()\nvar plugin = {\n  install: install,\n};\n\n// Auto-install when vue is found (eg. in browser via <script> tag)\nvar GlobalVue = null;\n\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\n\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\nexport default __vue_component__;\nexport { install };\n","<template>\r\n  <teleport to=\"body\">\r\n    <div\r\n      v-if=\"photoVisible\"\r\n      class=\"PhotoSlider__Wrapper\"\r\n      :class=\"{\r\n        PhotoSlider__Clean: showAnimateType !== ShowAnimateEnum.None,\r\n        PhotoSlider__Hide: !overlayVisible,\r\n      }\"\r\n    >\r\n      <div\r\n        class=\"PhotoSlider__Backdrop\"\r\n        :class=\"{\r\n          PhotoSlider__fadeIn: showAnimateType === ShowAnimateEnum.In,\r\n          PhotoSlider__fadeOut: showAnimateType === ShowAnimateEnum.Out,\r\n        }\"\r\n        :style=\"{\r\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\r\n        }\"\r\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\r\n      />\r\n      <div class=\"PhotoSlider__BannerWrap\">\r\n        <div class=\"PhotoSlider__Counter\">\r\n          {{ index + 1 }} / {{ items.length }}\r\n        </div>\r\n        <div class=\"PhotoSlider__BannerRight\">\r\n          <download\r\n            class=\"PhotoSlider__BannerIcon\"\r\n            @click.native=\"handleDownload\"\r\n          />\r\n          <rotate-left\r\n            class=\"PhotoSlider__BannerIcon\"\r\n            @click.native=\"handleRotateLeft\"\r\n          />\r\n          <rotate-right\r\n            class=\"PhotoSlider__BannerIcon\"\r\n            @click.native=\"handleRotateRight\"\r\n          />\r\n          <flip-horizontal\r\n            class=\"PhotoSlider__BannerIcon\"\r\n            @click.native=\"toggleFlipHorizontal\"\r\n          />\r\n          <flip-vertical\r\n            class=\"PhotoSlider__BannerIcon\"\r\n            @click.native=\"toggleFlipVertical\"\r\n          />\r\n          <close\r\n            class=\"PhotoSlider__BannerIcon\"\r\n            @click.native=\"handleClickClose\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div\r\n        v-for=\"(item, currentIndex) in showItems\"\r\n        :key=\"item.key\"\r\n        class=\"PhotoSlider__PhotoBox\"\r\n        :style=\"{\r\n          left: getItemLeft(currentIndex),\r\n          transition: getItemTransition(),\r\n          transform: getItemTransform(),\r\n        }\"\r\n        @transitionend=\"resetNeedTransition\"\r\n        @click=\"handleClickMask\"\r\n      >\r\n        <photo-view\r\n          :ref=\"(val) => setPhotoViewRef(item.key, val)\"\r\n          :origin-rect=\"originRect\"\r\n          :show-animate-type=\"showAnimateType\"\r\n          :src=\"item.src\"\r\n          @click.stop\r\n          @touchStart=\"handleTouchStart\"\r\n          @touchMove=\"handleTouchMove\"\r\n          @touchEnd=\"handleTouchEnd\"\r\n          @singleTap=\"handleSingleTap\"\r\n        />\r\n      </div>\r\n      <template v-if=\"!isTouchDevice\">\r\n        <div\r\n          v-if=\"loop || index > 0\"\r\n          class=\"PhotoSlider__ArrowLeft\"\r\n          @click=\"handlePrevious\"\r\n        >\r\n          <arrow-left />\r\n        </div>\r\n        <div\r\n          v-if=\"loop || index < items.length - 1\"\r\n          class=\"PhotoSlider__ArrowRight\"\r\n          @click=\"handleNext\"\r\n        >\r\n          <arrow-right />\r\n        </div>\r\n      </template>\r\n      <div v-if=\"currentItem.intro\" class=\"PhotoSlider__FooterWrap\">\r\n        {{ currentItem.intro }}\r\n      </div>\r\n    </div>\r\n  </teleport>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, computed, toRefs, PropType } from 'vue';\r\nimport PhotoView from '../PhotoView/index.vue';\r\nimport { horizontalOffset, minSwitchImageOffset } from '../constant';\r\nimport useBodyEffect from './useBodyEffect';\r\nimport useInnerWidth from './useInnerWidth';\r\nimport Close from './Close.vue';\r\nimport ArrowLeft from './ArrowLeft.vue';\r\nimport ArrowRight from './ArrowRight.vue';\r\nimport RotateLeft from './RotateLeft.vue';\r\nimport RotateRight from './RotateRight.vue';\r\nimport FlipHorizontal from './FlipHorizontal.vue';\r\nimport FlipVertical from './FlipVertical.vue';\r\nimport Download from './Download.vue';\r\nimport useAnimationHandle from './useAnimationHandle';\r\nimport {\r\n  ItemType,\r\n  ShowAnimateEnum,\r\n  TouchTypeEnum,\r\n  EdgeTypeEnum,\r\n} from '../types';\r\nimport isTouchDevice from '../utils/isTouchDevice';\r\nimport Teleport from 'vue2-teleport';\r\nexport default defineComponent({\r\n  name: 'PhotoSlider',\r\n  components: {\r\n    Teleport,\r\n    PhotoView,\r\n    Close,\r\n    ArrowLeft,\r\n    ArrowRight,\r\n    RotateLeft,\r\n    RotateRight,\r\n    FlipHorizontal,\r\n    FlipVertical,\r\n    Download,\r\n  },\r\n  props: {\r\n    /**\r\n     * 图片列表\r\n     */\r\n    items: {\r\n      type: Array as PropType<ItemType[]>,\r\n      required: true,\r\n    },\r\n    /**\r\n     * 图片当前索引\r\n     */\r\n    index: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    /**\r\n     * 是否显示模态框\r\n     */\r\n    visible: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    /**\r\n     * 箭头切换是否需要过渡\r\n     */\r\n    shouldTransition: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * 是否切换显隐覆盖物\r\n     */\r\n    toggleOverlay: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    /**\r\n     * 默认背景透明度\r\n     */\r\n    defaultBackdropOpacity: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n    /**\r\n     * 是否循环显示预览图\r\n     */\r\n    loop: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * 下载图片方法，不传使用内置的下载方法\r\n     */\r\n    downloadMethod: {\r\n      type: Function as PropType<(item: ItemType) => void | null>,\r\n      default: null,\r\n    },\r\n  },\r\n  emits: ['clickPhoto', 'clickMask', 'changeIndex', 'closeModal'],\r\n  setup(props) {\r\n    const { items, index, visible } = toRefs(props);\r\n    const currentItem = computed<ItemType>(() => {\r\n      return items.value[index.value] || {};\r\n    });\r\n\r\n    useBodyEffect(visible);\r\n    const { photoVisible, showAnimateType, originRect, onShowAnimateEnd } =\r\n      useAnimationHandle(visible, currentItem);\r\n    const { innerWidth } = useInnerWidth();\r\n\r\n    return {\r\n      innerWidth,\r\n      currentItem,\r\n      photoVisible,\r\n      showAnimateType,\r\n      originRect,\r\n      onShowAnimateEnd,\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      // 常量\r\n      horizontalOffset,\r\n      ShowAnimateEnum,\r\n      isTouchDevice,\r\n      // 触摸相关\r\n      touched: false,\r\n      hasMove: false,\r\n      needTransition: false,\r\n      clientX: 0,\r\n      clientY: 0,\r\n      touchMoveX: 0,\r\n      backdropOpacity: this.defaultBackdropOpacity,\r\n      // 是否显示覆盖物\r\n      overlayVisible: true,\r\n      // 虚拟下标，用于循环预览\r\n      virtualIndex: 0,\r\n      // photo-view 子组件\r\n      photoViewRefs: {} as { [key: string]: InstanceType<typeof PhotoView> },\r\n    };\r\n  },\r\n  computed: {\r\n    // 当前显示的图片列表\r\n    showItems() {\r\n      const len = this.items.length;\r\n      if (this.loop) {\r\n        const connect = this.items.concat(this.items).concat(this.items);\r\n        return connect.slice(len + this.index - 1, len + this.index + 2);\r\n      }\r\n      return this.items.slice(\r\n        Math.max(this.index - 1, 0),\r\n        Math.min(this.index + 2, len)\r\n      );\r\n    },\r\n  },\r\n  created() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  },\r\n  beforeUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  },\r\n  beforeUpdate() {\r\n    this.photoViewRefs = {};\r\n  },\r\n  methods: {\r\n    defaultDownloadMethod(item: ItemType) {\r\n      const paths = item.src.split('/');\r\n      const name = paths[paths.length - 1];\r\n\r\n      const img = new Image();\r\n      img.setAttribute('crossOrigin', 'Anonymous');\r\n      img.onload = () => {\r\n        const canvas = document.createElement('canvas');\r\n        const context = canvas.getContext('2d');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        context?.drawImage(img, 0, 0, img.width, img.height);\r\n        canvas.toBlob((blob) => {\r\n          if (blob) {\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.download = item.downloadName || name;\r\n            a.href = url;\r\n            a.dispatchEvent(new MouseEvent('click'));\r\n            // 释放 createObjectURL 创建的内存对象（否则以 blob:http 开头的 url 可以到浏览器访问，多次创建内存会不断增大）\r\n            URL.revokeObjectURL(url);\r\n          }\r\n        });\r\n      };\r\n      img.src = item.src + '?v=' + Date.now();\r\n    },\r\n    handleDownload() {\r\n      const item = this.items[this.index];\r\n      if (typeof this.downloadMethod === 'function') {\r\n        this.downloadMethod(item);\r\n      } else {\r\n        this.defaultDownloadMethod(item);\r\n      }\r\n    },\r\n    toggleFlipHorizontal() {\r\n      this.photoViewRefs[this.currentItem.key].toggleFlipHorizontal();\r\n    },\r\n    toggleFlipVertical() {\r\n      this.photoViewRefs[this.currentItem.key].toggleFlipVertical();\r\n    },\r\n    handleRotateLeft() {\r\n      this.photoViewRefs[this.currentItem.key].handleRotateLeft();\r\n    },\r\n    handleRotateRight() {\r\n      this.photoViewRefs[this.currentItem.key].handleRotateRight();\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    setPhotoViewRef(key: string, ref: any) {\r\n      this.photoViewRefs[key] = ref as InstanceType<typeof PhotoView>;\r\n    },\r\n    handleKeyDown(e: KeyboardEvent) {\r\n      if (this.visible) {\r\n        switch (e.code) {\r\n          case 'ArrowLeft':\r\n            this.handlePrevious();\r\n            break;\r\n          case 'ArrowRight':\r\n            this.handleNext();\r\n            break;\r\n          case 'Escape':\r\n            this.handleClickClose();\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    handleSingleTap(\r\n      _clientX: number,\r\n      _clientY: number,\r\n      e: MouseEvent | TouchEvent\r\n    ) {\r\n      if (this.toggleOverlay) {\r\n        this.overlayVisible = !this.overlayVisible;\r\n      }\r\n      this.$emit('clickPhoto', e);\r\n    },\r\n    handleTouchStart(clientX: number, clientY: number) {\r\n      this.touched = true;\r\n      this.needTransition = false;\r\n      this.clientX = clientX;\r\n      this.clientY = clientY;\r\n    },\r\n    handleTouchMove(\r\n      touchType: TouchTypeEnum,\r\n      clientX: number,\r\n      clientY: number,\r\n      lastScale: number,\r\n      edgeTypes: EdgeTypeEnum[]\r\n    ) {\r\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\r\n        this.handleTouchScaleMove(clientX, edgeTypes);\r\n      }\r\n      if (touchType === TouchTypeEnum.X) {\r\n        this.handleTouchHorizontalMove(clientX);\r\n      }\r\n      if (touchType === TouchTypeEnum.Y) {\r\n        this.handleTouchVerticalMove(clientX, clientY);\r\n      }\r\n    },\r\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\r\n      let touchMoveX = clientX - this.clientX;\r\n      if (\r\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\r\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\r\n      ) {\r\n        this.handleTouchHorizontalMove(clientX);\r\n      }\r\n    },\r\n    handleTouchHorizontalMove(clientX: number) {\r\n      let touchMoveX = clientX - this.clientX;\r\n\r\n      // 非循环模式下，第一张和最后一张超出时拖拽距离减半\r\n      if (\r\n        !this.loop &&\r\n        ((this.index === 0 && touchMoveX > 0) ||\r\n          (this.index === this.items.length - 1 && touchMoveX < 0))\r\n      ) {\r\n        touchMoveX = touchMoveX / 2;\r\n      }\r\n\r\n      this.hasMove = clientX !== this.clientX;\r\n      this.touchMoveX = touchMoveX;\r\n    },\r\n    handleTouchVerticalMove(clientX: number, clientY: number) {\r\n      let touchMoveY = Math.abs(clientY - this.clientY);\r\n      const opacity = Math.max(\r\n        Math.min(\r\n          this.defaultBackdropOpacity,\r\n          this.defaultBackdropOpacity - touchMoveY / 100 / 4\r\n        ),\r\n        0\r\n      );\r\n\r\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\r\n      this.backdropOpacity = opacity;\r\n    },\r\n    handleTouchEnd(\r\n      touchType: TouchTypeEnum,\r\n      clientX: number,\r\n      clientY: number,\r\n      lastScale: number,\r\n      edgeTypes: EdgeTypeEnum[]\r\n    ) {\r\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\r\n        this.handleTouchScaleEnd(clientX, edgeTypes);\r\n      }\r\n      if (touchType === TouchTypeEnum.X) {\r\n        this.handleTouchHorizontalEnd(clientX);\r\n      }\r\n      if (touchType === TouchTypeEnum.Y) {\r\n        this.handleTouchVerticalEnd(clientY);\r\n      }\r\n      // 只要移动过，则需要动画过渡\r\n      if (this.hasMove) {\r\n        this.needTransition = true;\r\n      }\r\n      this.touched = false;\r\n      this.hasMove = false;\r\n      this.clientX = 0;\r\n      this.clientY = 0;\r\n      this.touchMoveX = 0;\r\n    },\r\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\r\n      const offsetX = clientX - this.clientX;\r\n      // 下一张\r\n      if (\r\n        offsetX < -minSwitchImageOffset &&\r\n        edgeTypes.includes(EdgeTypeEnum.Right)\r\n      ) {\r\n        this.handleNext();\r\n      }\r\n      // 上一张\r\n      if (\r\n        offsetX > minSwitchImageOffset &&\r\n        edgeTypes.includes(EdgeTypeEnum.Left)\r\n      ) {\r\n        this.handlePrevious();\r\n      }\r\n    },\r\n    handleTouchHorizontalEnd(clientX: number) {\r\n      const offsetX = clientX - this.clientX;\r\n      // 下一张\r\n      if (offsetX < -minSwitchImageOffset) {\r\n        this.handleNext();\r\n      }\r\n      // 上一张\r\n      if (offsetX > minSwitchImageOffset) {\r\n        this.handlePrevious();\r\n      }\r\n    },\r\n    handleTouchVerticalEnd(clientY: number) {\r\n      const offsetY = clientY - this.clientY;\r\n\r\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\r\n        this.$emit('closeModal');\r\n      } else {\r\n        this.resetBackdropOpacity();\r\n      }\r\n    },\r\n    resetBackdropOpacity() {\r\n      this.backdropOpacity = this.defaultBackdropOpacity;\r\n    },\r\n    resetNeedTransition() {\r\n      this.needTransition = false;\r\n    },\r\n    handlePrevious() {\r\n      const len = this.items.length;\r\n      if (!this.loop && this.index === 0) return;\r\n      this.$emit('changeIndex', (this.index + len - 1) % len);\r\n      this.virtualIndex -= 1;\r\n    },\r\n    handleNext() {\r\n      const len = this.items.length;\r\n      if (!this.loop && this.index === len - 1) return;\r\n      this.$emit('changeIndex', (this.index + 1) % len);\r\n      this.virtualIndex += 1;\r\n    },\r\n    handleClickMask(e: MouseEvent | TouchEvent) {\r\n      this.$emit('clickMask', e);\r\n    },\r\n    handleClickClose() {\r\n      this.$emit('closeModal');\r\n    },\r\n    // 对于中间的图片，当预览下一张时，getItemTransform 方法会做动画左移一个单位。showItems 列表会发生变化使 currentIndex 会从 1 变成 0，也相当于左移一个单位\r\n    // 所以此时需要根据 virtualIndex 右移一个单位的来平衡其中一个左移即可\r\n    getItemLeft(currentIndex: number) {\r\n      let index = this.virtualIndex + currentIndex;\r\n      // 非循环模式的第一张图片不需要左移，因为只有两张图片，左侧没有图片\r\n      if (this.loop || this.index !== 0) {\r\n        index -= 1;\r\n      }\r\n      return `${(this.innerWidth + this.horizontalOffset) * index}px`;\r\n    },\r\n    getItemTransition() {\r\n      const transition = 'transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)';\r\n      if (this.needTransition) {\r\n        return transition;\r\n      }\r\n      if (this.hasMove) {\r\n        return undefined;\r\n      }\r\n      return this.shouldTransition ? transition : undefined;\r\n    },\r\n    getItemTransform() {\r\n      return `translate3d(${\r\n        -(this.innerWidth + this.horizontalOffset) * this.virtualIndex +\r\n        this.touchMoveX\r\n      }px, 0px, 0px)`;\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@keyframes PhotoView__fade {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\r\n  .PhotoSlider__BannerWrap,\r\n  .PhotoSlider__ArrowLeft,\r\n  .PhotoSlider__ArrowRight,\r\n  .PhotoSlider__FooterWrap {\r\n    opacity: 0;\r\n    @media (any-hover: hover) {\r\n      &:hover {\r\n        opacity: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\r\n  .PhotoSlider__BannerWrap,\r\n  .PhotoSlider__ArrowLeft,\r\n  .PhotoSlider__ArrowRight,\r\n  .PhotoSlider__FooterWrap {\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.PhotoSlider__Wrapper {\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  z-index: 2000;\r\n  user-select: none;\r\n\r\n  .PhotoSlider__Backdrop {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: -1;\r\n\r\n    &.PhotoSlider__fadeIn {\r\n      opacity: 0;\r\n      animation: PhotoView__fade 0.4s linear both;\r\n    }\r\n    &.PhotoSlider__fadeOut {\r\n      opacity: 1;\r\n      animation: PhotoView__fade 0.4s linear both reverse;\r\n    }\r\n  }\r\n\r\n  .PhotoSlider__BannerWrap {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 44px;\r\n    color: white;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    transition: opacity 0.2s ease-out;\r\n    z-index: 20;\r\n\r\n    @media (any-hover: hover) {\r\n      &:hover {\r\n        opacity: 1;\r\n      }\r\n    }\r\n\r\n    .PhotoSlider__Counter {\r\n      padding: 0 10px;\r\n      font-size: 14px;\r\n      opacity: 0.75;\r\n    }\r\n\r\n    .PhotoSlider__BannerRight {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      height: 100%;\r\n\r\n      .PhotoSlider__BannerIcon {\r\n        vertical-align: top;\r\n        box-sizing: border-box;\r\n        padding: 10px;\r\n        opacity: 0.75;\r\n        cursor: pointer;\r\n        transition: all 0.2s linear;\r\n\r\n        @media (any-hover: hover) {\r\n          &:hover {\r\n            opacity: 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .PhotoSlider__PhotoBox {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 10;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .PhotoSlider__ArrowLeft {\r\n    left: 0;\r\n  }\r\n\r\n  .PhotoSlider__ArrowRight {\r\n    right: 0;\r\n  }\r\n\r\n  .PhotoSlider__ArrowLeft,\r\n  .PhotoSlider__ArrowRight {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto 0 auto 0;\r\n    width: 70px;\r\n    height: 100px;\r\n    opacity: 0.7;\r\n    z-index: 20;\r\n    cursor: pointer;\r\n    transition: opacity 0.2s linear;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    @media (any-hover: hover) {\r\n      &:hover {\r\n        opacity: 1;\r\n      }\r\n    }\r\n\r\n    svg {\r\n      box-sizing: content-box;\r\n      padding: 10px;\r\n      width: 24px;\r\n      height: 24px;\r\n      fill: white;\r\n      background: rgba(0, 0, 0, 0.3);\r\n    }\r\n  }\r\n\r\n  .PhotoSlider__FooterWrap {\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    min-height: 44px;\r\n    padding: 10px;\r\n    line-height: 1.5;\r\n    font-size: 14px;\r\n    text-align: justify;\r\n    color: #ccc;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    transition: opacity 0.2s ease-out;\r\n    z-index: 20;\r\n\r\n    @media (any-hover: hover) {\r\n      &:hover {\r\n        opacity: 1;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <slot />\r\n    <photo-slider\r\n      :visible=\"visible\"\r\n      :index=\"index\"\r\n      :should-transition=\"shouldTransition\"\r\n      :toggle-overlay=\"!photoClosable\"\r\n      :default-backdrop-opacity=\"defaultBackdropOpacity\"\r\n      :items=\"items\"\r\n      :loop=\"loop\"\r\n      :download-method=\"downloadMethod\"\r\n      @clickPhoto=\"handleClickPhoto\"\r\n      @clickMask=\"handleClickMask\"\r\n      @changeIndex=\"updateIndex\"\r\n      @closeModal=\"handleHide\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, PropType, provide } from 'vue';\r\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\r\nimport useItems from './useItems';\r\nimport useVisible from './useVisible';\r\nimport useIndex from './useIndex';\r\nimport PhotoSlider from '../PhotoSlider/index.vue';\r\nimport { ItemType } from '../types';\r\n\r\nexport default defineComponent({\r\n  name: 'PhotoProvider',\r\n  components: {\r\n    PhotoSlider,\r\n  },\r\n  props: {\r\n    /**\r\n     * 图片点击是否关闭\r\n     */\r\n    photoClosable: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * 背景点击是否关闭\r\n     */\r\n    maskClosable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    /**\r\n     * 箭头切换是否需要过渡\r\n     */\r\n    shouldTransition: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * 默认背景透明度\r\n     */\r\n    defaultBackdropOpacity: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n    /**\r\n     * 是否循环显示预览图\r\n     */\r\n    loop: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * 下载图片方法，不传使用内置的下载方法\r\n     */\r\n    downloadMethod: {\r\n      type: Function as PropType<(item: ItemType) => void | null>,\r\n      default: null,\r\n    },\r\n  },\r\n  emits: ['indexChange', 'visibleChange'],\r\n  setup(_props, { emit }) {\r\n    const onIndexChange = () => {\r\n      emit('indexChange', { index, items, visible });\r\n    };\r\n    const onVisibleChange = () => {\r\n      emit('visibleChange', { index, items, visible });\r\n    };\r\n    const { index, updateIndex } = useIndex(onIndexChange);\r\n    const { items, updateItem, removeItem } = useItems(index);\r\n    const { visible, handleHide, handleShow } = useVisible(\r\n      items,\r\n      index,\r\n      onVisibleChange\r\n    );\r\n\r\n    provide(updateItemKey, updateItem);\r\n    provide(removeItemKey, removeItem);\r\n    provide(handleShowKey, handleShow);\r\n\r\n    return {\r\n      items,\r\n      updateItem,\r\n      removeItem,\r\n      visible,\r\n      handleHide,\r\n      handleShow,\r\n      index,\r\n      updateIndex,\r\n    };\r\n  },\r\n  methods: {\r\n    handleClickPhoto() {\r\n      if (this.photoClosable) {\r\n        this.handleHide();\r\n      }\r\n    },\r\n    handleClickMask() {\r\n      if (this.maskClosable) {\r\n        this.handleHide();\r\n      }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\r\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n","<template>\r\n  <!-- v-if=\"$slots.default && $slots.default()\" -->\r\n  <span\r\n    ref=\"root\"\r\n    style=\"display: inline-block\"\r\n    class=\"PhotoConsumer\"\r\n    @click=\"handleClick\"\r\n  >\r\n    <!-- @slot 默认插槽 -->\r\n    <slot />\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {\r\n  defineComponent,\r\n  inject,\r\n  onMounted,\r\n  onUnmounted,\r\n  ref,\r\n  watch,\r\n  toRefs,\r\n} from 'vue';\r\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\r\nimport uniqueId from 'lodash-es/uniqueId';\r\n\r\nexport default defineComponent({\r\n  name: 'PhotoConsumer',\r\n  props: {\r\n    /**\r\n     * 图片地址\r\n     */\r\n    src: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    /**\r\n     * 图片介绍\r\n     */\r\n    intro: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n    /**\r\n     * 图片下载名称，默认图片名称\r\n     */\r\n    downloadName: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const updateItem = inject(updateItemKey);\r\n    const removeItem = inject(removeItemKey);\r\n    const handleShow = inject(handleShowKey);\r\n    const root = ref<HTMLElement | null>(null);\r\n    const key = uniqueId();\r\n    const { src, intro, downloadName } = toRefs(props);\r\n\r\n    const handleClick = () => {\r\n      handleShow?.(key);\r\n    };\r\n    const getItem = () => ({\r\n      key,\r\n      src: src.value,\r\n      originRef: root.value,\r\n      intro: intro.value,\r\n      downloadName: downloadName.value,\r\n    });\r\n\r\n    watch([src, intro, downloadName], () => {\r\n      updateItem?.(getItem());\r\n    });\r\n\r\n    onMounted(() => {\r\n      updateItem?.(getItem());\r\n    });\r\n    onUnmounted(() => {\r\n      removeItem?.(key);\r\n    });\r\n\r\n    return {\r\n      root,\r\n      handleClick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\r\n","import PhotoProvider from './PhotoProvider/index.vue';\r\nimport PhotoConsumer from './PhotoConsumer/index.vue';\r\nimport PhotoSlider from './PhotoSlider/index.vue';\r\n\r\nconst components = [PhotoProvider, PhotoConsumer, PhotoSlider];\r\n\r\nconst install = (app: any): void => {\r\n  components.forEach((component) => {\r\n    app.component(component.name, component);\r\n  });\r\n};\r\n\r\nexport * from './types';\r\n\r\nexport { PhotoProvider, PhotoConsumer, PhotoSlider };\r\n\r\nexport default { install };\r\n"],"names":["updateItemKey","removeItemKey","handleShowKey","useItems","index","items","ref","getElementIndex","children","child","sortItems","cur","next","item","key","nextItems","nextEndIndex","useVisible","onVisibleChange","visible","itemIndex","useIndex","onIndexChange","newIndex","_sfc_main$c","defineComponent","getSuitableImageSize","naturalWidth","naturalHeight","rotate","innerWidth","innerHeight","width","height","scaleWidth","scaleHeight","useLoadImage","src","loaded","setSuitableImageSize","actualWidth","actualHeight","imageSize","loadImage","img","watch","isObject","value","type","freeGlobal","freeSelf","root","now","reWhitespace","trimmedEndIndex","string","reTrimStart","baseTrim","Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","isOwn","tag","unmasked","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","other","isBinary","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","throttle","useWindowResize","handleResize","onBeforeUnmount","ShowAnimateEnum","ShowAnimateEnum2","TouchTypeEnum","TouchTypeEnum2","EdgeTypeEnum","EdgeTypeEnum2","getAnimateOrigin","originRect","xOrigin","yOrigin","isTouchDevice","horizontalOffset","minStartTouchOffset","minSwitchImageOffset","maxScale","withContinuousTap","singleTap","doubleTap","continuousCount","withSingleTap","getPositionOnMoveOrScale","x","y","clientX","clientY","fromScale","toScale","imageCenterClientX","imageCenterClientY","offsetScale","originX","originY","getEdgeInfo","scale","currentWidth","currentHeight","edgeLeft","edgeRight","edgeTop","edgeBottom","getEdgeTypes","position","edgeTypes","getStandardPosition","getMultipleTouchPosition","e","nextClientX","nextClientY","useMoveImage","onTouchStart","onTouchMove","onTouchEnd","onSingleTap","touched","touchType","lastX","lastY","lastTouchLength","lastScale","handleMouseDown","handleDown","handleMouseMove","handleMouseUp","handleTouchStart","touch","handleTouchMove","handleTouchEnd","newClientX","newClientY","touchLength","handleMove","isMoveX","isMoveY","newX","newY","endScale","handleToScale","handleUp","onTap","setStandardPosition","handleWheel","newScale","standardPosition","_sfc_main$b","Spinner","props","emit","toRefs","handleRotateLeft","handleRotateRight","scaleX","scaleY","transform","str","name","useBodyEffect","style","originalOverflow","useInnerWidth","_sfc_main$a","_sfc_main$9","_sfc_main$8","_sfc_main$7","_sfc_main$6","_sfc_main$5","_sfc_main$4","_sfc_main$3","useAnimationHandle","currentItem","photoVisible","showAnimateType","originRef","top","left","script","this$1","fragment","node","mutations","shouldMove","i","mutation","filteredAddedNodes","childChangeRecord","normalizeComponent","template","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","context","originalRender","h","existing","isOldIE","id","addStyle","HEAD","styles","css","group","code","textNode","nodes","__vue_script__","__vue_render__","_vm","_h","_c","__vue_staticRenderFns__","__vue_inject_styles__","inject","__vue_scope_id__","__vue_module_identifier__","__vue_is_functional_template__","__vue_component__","install","Vue","plugin","GlobalVue","_sfc_main$2","Teleport","PhotoView","Close","ArrowLeft","ArrowRight","RotateLeft","RotateRight","FlipHorizontal","FlipVertical","Download","computed","onShowAnimateEnd","len","paths","canvas","blob","url","a","_clientX","_clientY","touchMoveX","touchMoveY","opacity","offsetX","offsetY","currentIndex","transition","_sfc_main$1","PhotoSlider","_props","updateIndex","updateItem","removeItem","handleHide","handleShow","provide","arrayMap","array","iteratee","length","isArray","INFINITY","symbolProto","symbolToString","baseToString","toString","idCounter","uniqueId","prefix","_sfc_main","intro","downloadName","handleClick","getItem","onMounted","onUnmounted","components","PhotoProvider","PhotoConsumer","app","component"],"mappings":"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","x_google_ignoreList":[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,44,47,48,49,50,51]}